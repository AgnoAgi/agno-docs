---
title: Human in the Loop
---

### 👥 Human-in-the-Loop Validation

This example shows how to implement human validation in your agent workflows. It demonstrates:
- Pre-execution validation
- Post-execution review
- Interactive feedback loops
- Quality control checkpoints

Example scenarios:
- Content moderation
- Critical decision approval
- Output quality validation
- Safety checks
- Expert review processes

## Code

```python human_in_the_loop.py
from typing import Dict, Optional

from agno.agent import Agent
from agno.exceptions import RetryAgentRun
from agno.models.openai import OpenAIChat
from agno.tools import FunctionCall, tool
from rich.prompt import Confirm


def pre_execution_check(fc: FunctionCall):
    """Validate function calls before execution"""
    print(f"\n🔍 Pre-execution check for: {fc.function.name}")
    print(f"Arguments: {fc.arguments}")

    if not Confirm.ask("Approve this action?"):
        raise RetryAgentRun("Action not approved. Please try something else.")


def post_execution_review(result: str) -> Optional[str]:
    """Review function output after execution"""
    print(f"\n📝 Review output: {result}")

    if not Confirm.ask("Accept this output?"):
        return "Output rejected. Please try again with different approach."
    return None


@tool(pre_hook=pre_execution_check, post_hook=post_execution_review)
def generate_content(topic: str, style: str) -> str:
    """Generate content with human validation at each step."""
    return f"Generated {style} content about {topic}"


# Create an agent with human oversight
agent = Agent(
    model=OpenAIChat(id="gpt-4o"),
    tools=[generate_content],
    description=(
        "You are a content creator who works closely with human reviewers. "
        "You understand the importance of getting approval and incorporating feedback."
    ),
    instructions=(
        "When generating content:\n"
        "1. Start with a clear plan\n"
        "2. Wait for human approval\n"
        "3. Generate the content\n"
        "4. Accept feedback gracefully\n"
        "5. Revise based on feedback"
    ),
    markdown=True,
)

# Example usage
agent.print_response(
    "Generate a technical blog post about AI safety",
    stream=True,
)

# More examples to try:
"""
Try these scenarios that benefit from human oversight:
1. "Create marketing copy for a new product launch"
2. "Write a sensitive customer communication"
3. "Generate a press release about company changes"
4. "Develop safety guidelines for a new process"
5. "Create content for regulatory compliance"
"""
```

## Usage

<Steps>
  <Snippet file="create-venv-step.mdx" />

  <Step title="Install libraries">
    ```bash
    pip install openai agno
    ```
  </Step>

  <Step title="Run the agent">
    ```bash
    python human_in_the_loop.py
    ```
  </Step>

</Steps>